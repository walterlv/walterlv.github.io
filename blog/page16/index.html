<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="天前"><meta name="hour-prompt" content="小时前"><meta name="minute-prompt" content="分钟前"><meta name="justnow-prompt" content="刚刚"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="walterlv" /><meta name="author" content="吕毅" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="吕毅的博客。.NET/C#/WinUI/MAUI/WPF Windows 应用开发者，微软最有价值专家，Microsoft MVP。" /><meta property="og:description" content="吕毅的博客。.NET/C#/WinUI/MAUI/WPF Windows 应用开发者，微软最有价值专家，Microsoft MVP。" /><link rel="canonical" href="https://blog.walterlv.com/blog/page16/" /><meta property="og:url" content="https://blog.walterlv.com/blog/page16/" /><meta property="og:site_name" content="walterlv" /><link rel="prev" href="https://blog.walterlv.com/blog/page15/" /><link rel="next" href="https://blog.walterlv.com/blog/page17/" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="walterlv" /><meta name="twitter:site" content="@_lvyi_" /><meta name="twitter:creator" content="@吕毅" /> <script type="application/ld+json"> {"description":"吕毅的博客。.NET/C#/WinUI/MAUI/WPF Windows 应用开发者，微软最有价值专家，Microsoft MVP。","headline":"walterlv","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://blog.walterlv.com/assets/img/logo.png"},"name":"吕毅"},"url":"https://blog.walterlv.com/blog/page16/","author":{"@type":"Person","name":"吕毅"},"@type":"WebPage","@context":"https://schema.org"}</script><title>walterlv</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="walterlv"><meta name="application-name" content="walterlv"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="topbar-wrapper" class="row topbar-down"><div id="topbar" class="col-12 d-flex h-100 align-items-center"><div id="topbar-logoside" class="col"> <a id="topbar-logo" href="https://blog.walterlv.com" alt="avatar"> <img src="/assets/img/logo.png" alt="avatar" onerror="this.style.display='none'"> </a> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i> <a id="topbar-title" class="site-title" href="https://blog.walterlv.com" alt="walterlv"> walterlv </a></div><div id="topbar-searchside" class="justify-content-center col-5"> <i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >取消</span></div><div class="col"></div></div></div><div id="sidebar" class="d-flex flex-column align-items-end" lang="zh-CN"><div class="sidebar-box post-item-box profile-wrapper text-center"><div class="site-title mt-3"> <a href="/">吕毅</a></div><div class="site-subtitle font-italic">.NET and Windows App Developer, Microsoft MVP</div></div><ul class="sidebar-box post-item-box"><li class="nav-item active"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/friends/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>朋友和收藏</span> </a><li class="nav-item"> <a href="/mind/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>胡思乱想</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/walterlv" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/_lvyi_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['walter.lv','qq.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper"><div id="main"><div class="row alone"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="post-list"><div class="post-preview"><h1> <a href="/post/how-to-identify-a-nullable-type.html">int? 竟然真的可以是 null！.NET/C# 确定可空值类型 Nullable<T> 实例的真实类型</a></h1><div class="post-content"><p> 使用 Nullable&amp;lt;T&amp;gt; 我们可以为原本不可能为 null 的值类型像引用类型那样提供一个 null 值。不过注意：Nullable&amp;lt;T&amp;gt; 本身也是个 struct，是个值类型哦。这意味着你随时可以调用 .HasValue 这样的方法，而不用担心会出现 NullReferenceException。 等等！除了本文提到的一些情况。 Nullable 中...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-08 18:01:14 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-08, 18:01 +0800" >2019-01-08</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1093 字"> <em>6 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/windows-desktop-bridge.html">签署 Centennial Program Addendum，使用 Desktop Bridge 将 Win32 应用转制成 UWP</a></h1><div class="post-content"><p> 能上架 Windows 应用商店的并不一定必须是 UWP 应用程序或者 PWA 程序，也可以是普通的 Win32 应用程序。典型的上架应用商店的应用有微信、Telegram、Snipaste 等。使用 Desktop Bridge，我们即可以为我们的普通 Win32 应用程序做一个 UWP 的包来。 商店中那些转制的应用 如果你并没有感受到 Win32 转制的商店应用和原生的 U...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-08 18:01:14 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-08, 18:01 +0800" >2019-01-08</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1458 字"> <em>8 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/name-convention-of-delegate-instance.html">C# 中委托实例的命名规则</a></h1><div class="post-content"><p> 我们知道一个类中的属性应该用名词或名词性短语，方法用动词或动宾短语；但是委托的实例却似乎有一些游离。因为在 .NET 中委托代表的是一个动作，既可以把它看作是名词，也可以看作是动词。在用法上，既可以像属性和变量一样被各种传递，也可以像一个方法一样被调用。 那么委托实例的命名，应该遵循属性和变量的命名，还是遵循方法的命名呢？ 委托的实例可以当作属性或者变量使用： var action...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-08 17:09:07 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-08, 17:09 +0800" >2019-01-08</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="516 字"> <em>2 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/the-semantics-of-three-value-bool.html">三值 bool? 进行与或运算后的结果</a></h1><div class="post-content"><p> bool? 实际上是 Nullable&amp;lt;Boolean&amp;gt; 类型，可以当作三值的 bool 类型来使用。不过三值的布尔进行与或运算时的结果与二值有什么不同吗？ 重载条件逻辑运算符“与”（&amp;amp;&amp;amp;）“或”（||） 在 [C# 重载条件逻辑运算符（&amp;amp;&amp;amp; 和   ）](/post/overloa...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-06 20:52:33 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-06, 20:52 +0800" >2019-01-06</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="237 字"> <em>1 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/why-we-need-another-im-tool-only-for-work.html">为什么我们不应该使用微信或者 QQ 作为团队协作的 IM 工具？</a></h1><div class="post-content"><p> 如果你的团队没有觉得微信是低效的团队 IM 工具，那只有两种可能： 团队成员很少使用微信进行私人的生活和娱乐。 你就是一个低效的团队，而且还不自知。 微信，连接一切 微信，连接一切。除了家人、朋友、同学这些熟人关系，还有同事、客户、用户、企业号这些工作上的关系，还有各种各种办事小程序、各种资讯公众号、各种商店服务号、快递通知等生活和私人的快捷入口。 每个人都有微信...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-06 18:52:36 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-06, 18:52 +0800" >2019-01-06</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2561 字"> <em>14 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/slack-api-starter-incoming-webhooks.html">Slack 开发入门之 Incoming Webhooks：往 Slack 的 Channel 中发消息</a></h1><div class="post-content"><p> 一个工程师团队使用 Slack 进行团队协作比 QQ / 微信流的效率高多啦。除了基本的 IM 之外，它的扩展性也是非常重要的一点。 本文介绍 Slack 的开发入门：Incoming Webhooks 篇。 创建一个新 Slack 应用 如果你已经创建了一个 Slack 应用，可以跳过这一节。 在这里 https://api.slack.com/apps/new 创建一个新...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-06 15:29:19 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-06, 15:29 +0800" >2019-01-06</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="796 字"> <em>4 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/wpf-free-threaded-dispatcher-object.html">WPF 中那些可跨线程访问的 DispatcherObject（WPF Free Threaded Dispatcher Object）</a></h1><div class="post-content"><p> 众所周知的，WPF 中多数对象都继承自 DispatcherObject，而 DispatcherObject 带给这些对象一个特点：不能跨线程访问。 不过，WPF 中依然存在一些例外。本文将介绍 WPF 那些可跨线程访问的 DispatcherObject，如何充分利用这个特点提高应用程序的性能，以及如何自己编写这样的 DispatcherObject。 什么样的 Dispat...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-03 09:03:45 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-03, 09:03 +0800" >2019-01-03</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4285 字"> <em>23 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/read-write-xml-using-xpath-in-dotnet.html">.NET 使用 XPath 来读写 XML 文件（顺带解决 XML 命名空间的问题）</a></h1><div class="post-content"><p> XPath 是 XML 路径语言（XML Path Language），用来确定XML文档中某部分位置的语言。无论是什么语言什么框架，几乎都可以使用 XPath 来高效查询 XML 文件。 本文将介绍 .NET 中的 XPath 相关类型的使用。 本文读写的 XML 文件会以 文章末尾的代码 - 假设的 XML 文件 作为示例。 关于 XPath 语法，可以阅读 XML 的 XPa...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2019-01-01 11:34:30 +0800" data-toggle="tooltip" data-placement="bottom" title="2019-01-01, 11:34 +0800" >2019-01-01</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1201 字"> <em>6 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/add-run-external-executable-tools-for-vscode.html">基于 task 为 VSCode 添加自定义的外部命令</a></h1><div class="post-content"><p> 我们有很多全局的工具能在各处使用命令行调用，针对某个仓库特定的命令可以放到仓库中。不过，如果能够直接为顺手的文本编辑器添加自定义的外部命令，那么执行命令只需要简单的快捷键即可，不需要再手工敲了。 写一个外部命令的调用 由于是调用外部工具，所以工具本身用什么语言写已经不重要的了，只要有环境，没有什么是不能执行的。 这里以我博客中使用的外部命令 mdmeta 为例。我将此工具使用 ...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-30 17:00:43 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-30, 17:00 +0800" >2018-12-30</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="780 字"> <em>4 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/mutex-in-dotnet.html">.NET 中使用 Mutex 进行跨越进程边界的同步</a></h1><div class="post-content"><p> Mutex 是 Mutual Exclusion 的缩写，是互斥锁，用于防止两个线程同时对计算机上的同一个资源进行访问。不过相比于其他互斥的方式，Mutex 能够跨越线程边界。 Mutex 是什么？ 与其他线程同步的方式一样，Mutex 也提供对资源的互斥访问；不过 Mutex 使用的系统资源会比 Monitor 更多，而 Monitor 就是实现 C# 中 lock 关键字所用...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-30 16:41:54 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-30, 16:41 +0800" >2018-12-30</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1609 字"> <em>8 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/file-exists-vs-fileinfo-exists.html">谨慎使用 FileInfo.Exists 实例方法，而是使用 File.Exists 静态方法替代</a></h1><div class="post-content"><p> 如果你在代码中使用了 FileInfo.Exists 实例方法来判断一个文件是否存在，也许会发现此方法可能错误地判断来一个文件是否真的存在。这是一个坑。 本文将介绍坑的原因，并提供填坑的办法。 问题代码 我们使用两种不同的方式判断文件是否存在： FileInfo.Exists 实例方法 File.Exists 静态方法 static async Task Mai...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-30 16:41:21 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-30, 16:41 +0800" >2018-12-30</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="527 字"> <em>2 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/introduce-command-line-parser.html">C#/.NET 使用 CommandLineParser 来标准化地解析命令行</a></h1><div class="post-content"><p> CommandLineParser 是一款用于解析命令行参数的 NuGet 包。你只需要关注你的业务，而命令行解析只需要极少量的配置代码。 本文将介绍如何使用 CommandLineParser 高效写出自己程序的命令行解析部分。 NuGet 包和 GitHub 开源仓库 NuGet 包：CommandLineParser GitHub 开源仓库：commandlin...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-30 16:10:22 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-30, 16:10 +0800" >2018-12-30</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1163 字"> <em>6 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/how-to-get-high-resolution-view-of-a-wpf-app.html">只需 5 秒钟，你就能取到 WPF 程序的超高分辨率超高清截图</a></h1><div class="post-content"><p> 我想要截取一个 WPF 程序的图标，但是它太小了。如果我就这样截屏截下来，是很不高清的。由于我需要制作一份课件，所以我需要超高清版本，可是，如何做才能最快速拿到 WPF 程序的超高清截图呢？ 本文分享一个方法，只需 5 秒钟，你就能拿到！ 第一步：打开 Snoop 如果你没有 Snoop，请前往下载：Release Snoop 2.10.0 · cplotts/snoopwpf...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-26 12:54:01 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-26, 12:54 +0800" >2018-12-26</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="326 字"> <em>1 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/detecting-rebuild-switch-using-msbuild-target-en.html">Write a MSBuild Target to detect whether the project is rebuilding or not</a></h1><div class="post-content"><p> MSBuild or the dotnet build command both supports Incremental Building for compiling performance. You can read How to: Build Incrementally - Visual Studio - Microsoft Docs to lean more about increm...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-25 08:07:34 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-25, 08:07 +0800" >2018-12-25</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="591 字"> <em>3 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/detecting-rebuild-switch-using-msbuild-target.html">编写 Target 检测 MSBuild / dotnet build 此次编译是否是差量编译</a></h1><div class="post-content"><p> MSBuild 或 Roslyn 编译项目时均支持差量编译，毕竟为了性能。我在 每次都要重新编译？太慢！让跨平台的 MSBuild/dotnet build 的 Target 支持差量编译 一文中介绍了如何使一个 Target 支持差量编译。在那篇文章中我说到差量编译会导致 Target 不执行；也就是说，如果一个 Target 对后续的编译会产生影响，那么一定不能设置为差量编译。 不过，...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-25 07:43:28 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-25, 07:43 +0800" >2018-12-25</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1342 字"> <em>7 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/roslyn-syntax-tree-supporting-preprocessor-symbols.html">在 Roslyn 分析语法树时添加条件编译符号的支持</a></h1><div class="post-content"><p> 我们在代码中会写 #if DEBUG 或者 [Conditional(&quot;DEBUG&quot;)] 来使用已经定义好的条件编译符号。而定义条件编译符号可以在代码中使用 #define WALTERLV 来实现，也可以通过在项目属性中设置条件编译符号（Conditional Compilation Symbols）来实现。 然而如果我们没有做任何特殊处理，那么使用 Roslyn 分析使用了条件编译符号...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-24 22:36:28 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-24, 22:36 +0800" >2018-12-24</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="441 字"> <em>2 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/what-is-an-awaiter.html">.NET 中什么样的类是可使用 await 异步等待的？</a></h1><div class="post-content"><p> 我们已经知道 Task 是可等待的，但是去看看 Task 类的实现，几乎找不到哪个基类、接口或者方法属性能够告诉我们与 await 相关。 而本文将探索什么样的类是可使用 await 异步等待的？ Dixin’s Blog - Understanding C# async / await (2) The Awaitable-Awaiter Pattern 一文解决了我们的疑惑。asy...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 15:17:11 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 15:17 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="834 字"> <em>4 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/understand-and-write-custom-awaiter.html">.NET 除了用 Task 之外，如何自己写一个可以 await 的对象？</a></h1><div class="post-content"><p> .NET 中的 async / await 写异步代码用起来真的很爽，就像写同步一样。我们可以在各种各样的异步代码中看到 Task 返回值，这样大家便可以使用 await 等待这个方法。不过，有时需要写一些特别的异步方法，这时需要自己来实现一个可以异步等待的对象。 本文将讲述如何实现一个可等待对象，一个自定义的 Awaiter。 Awaiter 系列文章 入门篇： .N...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 15:17:09 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 15:17 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1696 字"> <em>9 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/abstract-awaitable-and-awaiter.html">定义一组抽象的 Awaiter 的实现接口，你下次写自己的 await 可等待对象时将更加方便</a></h1><div class="post-content"><p> 我在几篇文章中都说到了在 .NET 中自己实现 Awaiter 情况。async / await 写异步代码用起来真的很爽，就像写同步一样。然而实现 Awaiter 没有现成的接口，它需要你按照编译器的要求为你的类型添加一些具有特定名称的属性和方法。然而没有接口的帮助，我们编写起来就很难获得工具（如 ReSharper）自动生成代码的支持。 本文将分享我提取的自己实现 Awaiter 的接...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 15:17:04 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 15:17 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="716 字"> <em>3 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/default-task-scheduler-and-thread-pool.html">了解 .NET 的默认 TaskScheduler 和线程池（ThreadPool）设置，避免让 Task.Run 的性能急剧降低</a></h1><div class="post-content"><p> .NET Framework 4.5 开始引入 Task.Run，它可以很方便的帮助我们使用 async / await 语法，同时还使用线程池来帮助我们管理线程。以至于我们编写异步代码可以像编写同步代码一样方便。 不过，如果滥用，也可能导致应用的性能急剧下降。本文将说明在默认线程池配置（ThreadPoolTaskScheduler）的情况下，应该如何使用 Task.Run 来避免性能的...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 15:16:55 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 15:16 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1239 字"> <em>6 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/open-mobile-hotspot-in-windows-10-en.html">Turn on Mobile Hotspot (Wi-Fi) in Windows 10</a></h1><div class="post-content"><p> We’ll learn how to turn on Mobile Hotspot (Wi-Fi) in Windows 10. This post is written in multiple languages. Please select yours: 中文 ...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 13:35:01 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 13:35 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="111 字"> <em>1 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/open-mobile-hotspot-in-windows-10.html">在 Windows 10 中开启移动 WLAN 热点</a></h1><div class="post-content"><p> 本文将介绍如何在 Windows 10 中开启移动 Wi-Fi 热点。 This post is written in multiple languages. Please select yours: 中文 E...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-23 13:27:54 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-23, 13:27 +0800" >2018-12-23</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="197 字"> <em>1 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/write-dispatcher-awaiter-for-ui.html">在 WPF/UWP 中实现一个可以用 await 异步等待 UI 交互操作的 Awaiter</a></h1><div class="post-content"><p> .NET 和 C# 共同给我们带来的 async/await 异步编程模型（TAP）用起来真的很爽。为了实现异步等待，我们只需要在一切能够能够异步等待的方法前面加上 await 即可。能够异步等待的最常见的类型莫过于 Task，但也有一些其他类型。即便有些耗时操作没有返回可等待的类型，我们也可以用一句 Task.Run(action) 来包装（同步转异步 - 林德熙 中也有说明）；不过副作用...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-22 19:54:48 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-22, 19:54 +0800" >2018-12-22</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3155 字"> <em>17 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/write-an-awaiter-that-await-part-of-a-loop.html">.NET 编写一个可以异步等待循环中任何一个部分的 Awaiter</a></h1><div class="post-content"><p> 林德熙 小伙伴希望保存一个文件，并且希望如果出错了也要不断地重试。然而我认为如果一直错误则应该对外抛出异常让调用者知道为什么会一直错误。 这似乎是一个矛盾的要求。然而最终我想到了一个办法：让重试一直进行下去，谁需要关心异常谁就去 catch 异常，不需要关心异常的模块则跟着一直重试直到成功。 我们通过编写一个自己的 Awaiter 来实现，本文将说明其思路和最终实现的代码。 A...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-22 19:50:54 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-22, 19:50 +0800" >2018-12-22</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2139 字"> <em>11 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/use-task-completion-source-as-await-locker.html">.NET 中使用 TaskCompletionSource 作为线程同步互斥或异步操作的事件</a></h1><div class="post-content"><p> 你可以使用临界区（Critical Section）、互斥量（Mutex）、信号量（Semaphores）和事件（Event）来处理线程同步。然而，在编写一些异步处理函数，尤其是还有 async 和 await 使用的时候，还有一些更方便的类型可以用来处理线程同步。 使用 TaskCompletionSource，你可以轻松地编写既可以异步等待，又可以同步等待的代码来。 等待事件...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-22 15:50:23 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-22, 15:50 +0800" >2018-12-22</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="364 字"> <em>2 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/write-a-windows-screen-saver-using-wpf.html">使用 WPF 开发一个 Windows 屏幕保护程序</a></h1><div class="post-content"><p> 最近有小伙伴问我如何可以让 Windows 静置一段时间不操作之后，显示一个特殊的界面。我想了想，屏幕保护程序可以做到这一点，而且，屏幕保护程序的开发也是非常简单的。 本文将介绍如何为 Windows 这一悠久的功能进行开发。 屏幕保护程序的本质 屏幕保护程序本质上就是一个 Win32 窗口应用程序。 好了，这一节真的结束了…… 编译好一个窗口应用程序之后，把扩展名改为...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-22 10:24:33 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-22, 10:24 +0800" >2018-12-22</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="816 字"> <em>4 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/uwp/2017/09/17/optimize-image-in-uwp.html">优化 UWP 中图片的内存占用</a></h1><div class="post-content"><p> 跟图片打交道的 UWP 应用或多或少都会遇到图片带来的性能问题，就算不主要处理图片，做个论坛做个新闻客户端都涉及到大量图片。一个帖子、一篇文章里多半都是些高清大图，这些图片一张即可占用程序 1~2M 的内存空间。普通的写法内存很快就爆了，那么 UWP 中我们可以用哪些方法优化呢？ 1. DecodePixelWidth/DecodePixelHeight 对于那些高分辨率图像，直接设...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-21 16:51:33 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-21, 16:51 +0800" >2018-12-21</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="885 字"> <em>4 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/watch-file-change-even-the-file-or-directory-not-exist.html">文件和文件夹不存在的时候，FileSystemWatcher 监听不到文件的改变？如果递归地监听就可以了</a></h1><div class="post-content"><p> 当你需要监视文件或文件夹的改变的时候，使用 FileSystemWatcher 便可以完成。不过，FileSystemWatcher 对文件夹的监视要求文件夹必须存在，否则会产生错误“无效路径”。 那么，如果文件或文件夹不存在的时候可以怎么监视文件的改变呢？更麻烦的是如果顶层很多级文件夹都不存在，怎么能监视呢？本文将告诉你方法。 本文的代码适用于 .NET Framework 和 .NE...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-20 10:05:38 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-20, 10:05 +0800" >2018-12-20</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2352 字"> <em>13 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/post/what-is-stylecop.html">StyleCop 是什么，可以帮助团队带来什么价值？</a></h1><div class="post-content"><p> StyleCop 本质上是一个 C# 源代码规则分析器，可以帮助团队成员强制执行一组代码样式和一致性规则。 本文将简述 StyleCop 以及它能为团队带来的价值。 StyleCop 是什么？ StyleCop 本质上是一个 C# 源代码规则分析器，可以帮助团队成员强制执行一组代码样式和一致性规则。 划重点 —— “强制”。只要你愿意，你甚至可以让多写了一个空格的小伙伴无法成...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-15 16:14:38 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-15, 16:14 +0800" >2018-12-15</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="516 字"> <em>2 分钟</em></span></div></div></div><div class="post-preview"><h1> <a href="/uwp/2017/09/25/launch-uri-async.html">UWP 中的 LaunchUriAsync，使用默认浏览器或其他应用打开链接</a></h1><div class="post-content"><p> 古老的 Win32 应用启动其他程序太过方便，以至于一部分开发者都已经不记得 Windows 能通过关联协议（参见 桌面应用程序关联协议）的方式通过统一资源定位符（URI）来启动应用程序了。 转到 UWP 后，使用 URI 启动应用似乎成为了最推荐的方式。于是一句 LaunchUriAsync 就能解决大多数问题。 常用的 Windows 10 内置协议 ...</p></div><div class="post-meta text-muted d-flex"><div class="mr-auto"> <i class="far fa-calendar fa-fw"></i> <em class="timeago" date="2018-12-14 09:54:33 +0800" data-toggle="tooltip" data-placement="bottom" title="2018-12-14, 09:54 +0800" >2018-12-14</em> <i class="far fa-clock fa-fw"></i> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1553 字"> <em>8 分钟</em></span></div></div></div></div><ul class="pagination align-items-center mt-4 mb-0 pl-lg-2"><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/page15/" aria-label="previous-page"> <i class="fas fa-angle-left"></i> </a><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/">1</a><li class="page-item disabled"> <span class="page-link btn-box-shadow">...</span><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/page15/">15</a><li class="page-item active"> <a class="page-link btn-box-shadow" href="/blog/page16/">16</a><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/page17/">17</a><li class="page-item disabled"> <span class="page-link btn-box-shadow">...</span><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/page23/">23</a><li class="page-index align-middle"> <span>16</span> <span class="text-muted">/ 23</span><li class="page-item "> <a class="page-link btn-box-shadow" href="/blog/page17/" aria-label="next-page"> <i class="fas fa-angle-right"></i> </a></ul></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/post/monitor-foreground-window-on-windows">如何在控制台程序中监听 Windows 前台窗口的变化</a><li><a href="/post/how-to-start-a-process-with-environment-variables-without-code">在 Windows 上如何在启动程序时单独为这个程序指定环境变量，而不需要编写任何代码或脚本</a><li><a href="/post/wpf-draw-a-hsl-hsb-palette-using-hlsl">WPF 像素着色器进阶：使用 HLSL 编写一个高性能的实时变化的 HSL/HSV/HSB 调色盘</a><li><a href="/post/create-wpf-pixel-shader-effects-using-shazzam-shader-editor.html">WPF 像素着色器入门：使用 Shazzam Shader Editor 编写 HLSL 像素着色器代码</a><li><a href="/post/where-is-the-windows-10-native-icons.html">Windows 10 自带那么多图标，去哪里找呢？</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/wpf/">wpf</a> <a class="post-tag" href="/tags/visualstudio/">visualstudio</a> <a class="post-tag" href="/tags/msbuild/">msbuild</a> <a class="post-tag" href="/tags/uwp/">uwp</a> <a class="post-tag" href="/tags/nuget/">nuget</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/roslyn/">roslyn</a></div></div></div></div></div><footer class="d-flex flex-column w-100 justify-content-center"><div id="analytics-box"> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-108101550-1"></script> <script> document.addEventListener("DOMContentLoaded", function (event) { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-108101550-1'); }); </script> <script async type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1264408226'%3E%3C/span%3E%3Cscript src='//s22.cnzz.com/z_stat.php%3Fid%3D1264408226%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script></div><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2014-2024 <a href="https://github.com/walterlv">walterlv</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由吕毅按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，基于 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题修改。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/dotnet/">dotnet</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/wpf/">wpf</a> <a class="post-tag" href="/tags/visualstudio/">visualstudio</a> <a class="post-tag" href="/tags/msbuild/">msbuild</a> <a class="post-tag" href="/tags/uwp/">uwp</a> <a class="post-tag" href="/tags/nuget/">nuget</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/roslyn/">roslyn</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script defer src="/assets/js/dist/home.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script>
